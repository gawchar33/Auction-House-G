<!doctype html>
<html ng-app="auctionApp">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Profile â€” Auction House</title>
  <link rel="stylesheet" href="style.css">
  <script>
    // indicate navbar should be hidden on this page
    window.HIDE_NAV = true;
  </script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.8.3/angular.min.js"></script>
  <script src="app.js"></script>
  <script src="auth.js"></script>
  <script src="profile.js"></script>
</head>
<body ng-controller="ProfileController" ng-cloak>

  <div ng-include="'navbar.html'"></div>

  <main class="container main-wrap">
    <section class="profile-section">
      <div class="profile-card">

        <!-- header -->
        <header class="profile-head">
          <h1>My Profile</h1>
          <p class="muted">View or edit your account details. Click Edit to update.</p>
        </header>

        <!-- READ VIEW -->
        <div class="profile-read" ng-if="!editing">
          <div class="profile-grid">
            <div class="left-col">
              <div class="photo-preview">
                <img ng-src="{{ user.image || user.avatar_base64 || user.profile_photo || 'assets/no-avatar.svg' }}" alt="avatar" />
              </div>
            </div>

            <div class="right-col">
              <div class="info-row"><strong>First name:</strong> <span>{{ user.first_name || '-' }}</span></div>
              <div class="info-row"><strong>Last name:</strong> <span>{{ user.last_name || '-' }}</span></div>
              <div class="info-row"><strong>Email:</strong> <span>{{ user.email || '-' }}</span></div>
              <div class="info-row"><strong>Phone:</strong> <span>{{ user.phone || '-' }}</span></div>
              <div class="info-row"><strong>Address:</strong> <span>{{ user.address || '-' }}</span></div>

              <div class="form-actions" style="margin-top:12px;">
                <button class="btn primary" ng-click="startEdit()">Edit Profile</button>
                <a class="btn ghost btn-back" href="index.html">Back to Home</a>
              </div>
            </div>
          </div>
        </div>

        <!-- EDIT FORM -->
        <form name="profileForm" class="profile-form" ng-submit="save()" ng-if="editing" novalidate>
          <div class="profile-grid">
            <div class="left-col">
              <label>Profile photo</label>
              <div class="photo-row">
                <div class="photo-preview">
                  <img id="photoPreview" ng-src="{{ user.image || user.avatar_base64 || user.profile_photo || 'assets/no-avatar.svg' }}" alt="avatar"/>
                </div>
                <div class="photo-actions">
                  <input id="photoInput" type="file" accept="image/*" onchange="angular.element(this).scope().onFileChange(this)" />
                  <small class="muted">PNG/JPG, max 2MB</small>
                </div>
              </div>

              <label>First name</label>
              <input type="text" ng-model="user.first_name" placeholder="First name" required />

              <label>Last name</label>
              <input type="text" ng-model="user.last_name" placeholder="Last name" />

              <label>Phone</label>
              <input type="tel" ng-model="user.phone" placeholder="+1 555 555 5555" />
            </div>

            <div class="right-col">
              <label>Address</label>
              <input type="text" ng-model="user.address" placeholder="Street, City, Country" />

              <label>Email</label>
              <input type="email" ng-model="user.email" placeholder="you@example.com" required />

              <div class="form-actions stacked" style="margin-top:14px;">
                <button type="submit" class="btn primary" ng-disabled="saving">Save changes</button>
                <button type="button" class="btn ghost" ng-click="cancelEdit()">Cancel</button>
                <a class="btn ghost btn-back" href="index.html">Back to Home</a>
                <span class="status" ng-if="message">{{ message }}</span>
              </div>
            </div>
          </div>
        </form>

      </div>
    </section>
  </main>

</body>
</html>
